{"ast":null,"code":"var _process$env$REACT_AP;\nconst API_BASE = (_process$env$REACT_AP = process.env.REACT_APP_API_BASE) !== null && _process$env$REACT_AP !== void 0 ? _process$env$REACT_AP : \"\";\nfunction withBaseUrl(inputUrl) {\n  if (/^https?:\\/\\//i.test(inputUrl)) return inputUrl;\n  return `${API_BASE}${inputUrl.startsWith(\"/\") ? \"\" : \"/\"}${inputUrl}`;\n}\nexport async function apiFetch(path, options = {}) {\n  const token = localStorage.getItem(\"token\");\n  const headers = {\n    \"Content-Type\": \"application/json\",\n    ...(token ? {\n      Authorization: `Bearer ${token}`\n    } : {}),\n    ...(options.headers || {})\n  };\n\n  // 객체 바디는 JSON 직렬화\n  let body = options.body;\n  if (body && typeof body === \"object\" && (headers[\"Content-Type\"] || \"\").includes(\"application/json\")) {\n    try {\n      body = JSON.stringify(body);\n    } catch {}\n  }\n\n  // 네트워크 호출\n  let res;\n  try {\n    res = await fetch(`${API_BASE}${path}`, {\n      ...options,\n      headers,\n      body\n    });\n  } catch {\n    const err = new Error(\"네트워크 오류가 발생했습니다.\");\n    err.code = \"NETWORK_ERROR\";\n    err.status = 0;\n    err.url = `${API_BASE}${path}`;\n    throw err;\n  }\n  const contentType = res.headers.get(\"content-type\") || \"\";\n\n  // 실패 응답 처리 (항상 문자열 메시지로 Error 던지기)\n  if (!res.ok) {\n    let text = \"\";\n    try {\n      text = await res.text();\n    } catch {}\n    let code = `HTTP_${res.status}`;\n    let message = `HTTP ${res.status}`;\n    let payload = null;\n    if (text) {\n      try {\n        const json = JSON.parse(text);\n        payload = json;\n        if (json && (json.code || json.message)) {\n          code = json.code || code;\n          message = typeof json.message === \"string\" ? json.message : message;\n        } else {\n          message = typeof json === \"string\" ? json : JSON.stringify(json);\n        }\n      } catch {\n        message = text;\n      }\n    }\n    const err = new Error(message);\n    err.code = code;\n    err.status = res.status;\n    err.url = `${API_BASE}${path}`;\n    err.payload = payload;\n    throw err;\n  }\n\n  // 성공 응답\n  if (contentType.includes(\"application/json\")) return res.json();\n  return res.text();\n}\nexport async function apiFetchText(url, options = {}) {\n  const token = localStorage.getItem(\"token\");\n  const headers = {\n    \"Content-Type\": \"application/json\",\n    ...(options.headers || {}),\n    ...(token ? {\n      Authorization: `Bearer ${token}`\n    } : {})\n  };\n  const res = await fetch(withBaseUrl(url), {\n    ...options,\n    headers\n  });\n  if (!res.ok) {\n    const errText = await res.text().catch(() => \"\");\n    const message = errText || `HTTP ${res.status}`;\n    throw new Error(message);\n  }\n  return res.text();\n}","map":{"version":3,"names":["API_BASE","_process$env$REACT_AP","process","env","REACT_APP_API_BASE","withBaseUrl","inputUrl","test","startsWith","apiFetch","path","options","token","localStorage","getItem","headers","Authorization","body","includes","JSON","stringify","res","fetch","err","Error","code","status","url","contentType","get","ok","text","message","payload","json","parse","apiFetchText","errText","catch"],"sources":["C:/Users/mrk80/Documents/dev/java_project/news-summary-frontend/news-summary-frontend/src/api/client.js"],"sourcesContent":["const API_BASE = process.env.REACT_APP_API_BASE ?? \"\";\r\n\r\nfunction withBaseUrl(inputUrl) {\r\n    if(/^https?:\\/\\//i.test(inputUrl)) return inputUrl;\r\n\r\n    return `${API_BASE}${inputUrl.startsWith(\"/\") ? \"\" : \"/\"}${inputUrl}`;\r\n}\r\n\r\nexport async function apiFetch(path, options = {}) {\r\n    const token = localStorage.getItem(\"token\");\r\n    const headers = {\r\n        \"Content-Type\": \"application/json\",\r\n        ...(token ? { Authorization: `Bearer ${token}` } : {}),\r\n        ...(options.headers || {}),\r\n    };\r\n\r\n    // 객체 바디는 JSON 직렬화\r\n    let body = options.body;\r\n    if (body && typeof body === \"object\" && (headers[\"Content-Type\"] || \"\").includes(\"application/json\")) {\r\n        try { body = JSON.stringify(body); } catch {}\r\n    }\r\n\r\n    // 네트워크 호출\r\n    let res;\r\n    try {\r\n        res = await fetch(`${API_BASE}${path}`, { ...options, headers, body });\r\n    } catch {\r\n        const err = new Error(\"네트워크 오류가 발생했습니다.\");\r\n        err.code = \"NETWORK_ERROR\";\r\n        err.status = 0;\r\n        err.url = `${API_BASE}${path}`;\r\n        throw err;\r\n    }\r\n\r\n    const contentType = res.headers.get(\"content-type\") || \"\";\r\n\r\n    // 실패 응답 처리 (항상 문자열 메시지로 Error 던지기)\r\n    if (!res.ok) {\r\n        let text = \"\";\r\n        try { text = await res.text(); } catch {}\r\n\r\n        let code = `HTTP_${res.status}`;\r\n        let message = `HTTP ${res.status}`;\r\n        let payload = null;\r\n\r\n        if (text) {\r\n        try {\r\n            const json = JSON.parse(text);\r\n            payload = json;\r\n            if (json && (json.code || json.message)) {\r\n            code = json.code || code;\r\n            message = typeof json.message === \"string\" ? json.message : message;\r\n            } else {\r\n            message = typeof json === \"string\" ? json : JSON.stringify(json);\r\n            }\r\n        } catch {\r\n            message = text;\r\n        }\r\n        }\r\n\r\n        const err = new Error(message);\r\n        err.code = code;\r\n        err.status = res.status;\r\n        err.url = `${API_BASE}${path}`;\r\n        err.payload = payload;\r\n        throw err;\r\n    }\r\n\r\n    // 성공 응답\r\n    if (contentType.includes(\"application/json\")) return res.json();\r\n    return res.text();\r\n}\r\n\r\nexport async function apiFetchText(url, options = {}) {\r\n    const token = localStorage.getItem(\"token\");\r\n\r\n    const headers = {\r\n        \"Content-Type\": \"application/json\",\r\n        ...(options.headers || {}),\r\n        ...(token ? { Authorization: `Bearer ${token}` }: {}),\r\n    };\r\n\r\n    const res = await fetch(withBaseUrl(url), {\r\n        ...options,\r\n        headers,\r\n    });\r\n\r\n    if(!res.ok) {\r\n        const errText = await res.text().catch(() => \"\");\r\n        const message = errText || `HTTP ${res.status}`;\r\n        throw new Error(message);\r\n    }\r\n    return res.text();\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}